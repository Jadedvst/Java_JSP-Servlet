<%@ page import="utils.CookieManager"%>
<%@ page import="utils.JSFunction"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<%
String user_id = request.getParameter("user_id");//전송되는 값 하나
String user_pwd = request.getParameter("user_pwd");//전송되는 값 하나
String save_check = request.getParameter("save_check");
if(user_id.equalsIgnoreCase("must")&&user_pwd.equalsIgnoreCase("1234")){//하드코딩
	//HyperLink처럼 다른 페이지로 보낸다
	if(save_check!=null&&save_check.equals("Y")){
		CookieManager.makeCookie(response, "loginId", user_id, 86400);
	}
	else{
		CookieManager.deleteCookie(response, "loginId");
	}
	response.sendRedirect("ResponseWelcome.jsp");
	num=0;
	request.getRequestDispatcher("ResponseMain.jsp?loginErr=null");
}
else{
	//ResponseMain에 제어흐름으로 넘겨준다,loginErr(1)이라는 매개변수를 번달
	request.getRequestDispatcher("ResponseMain.jsp?loginErr="+num++).forward(request,response);
}
%>


<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cookie - Save ID</title>
</head>
<body>
<form action = "IdSaveProcess.jsp" method ="post">
	아이디 : <input type="text" name="user_id" value="<%= loginId %>"/>
			<input type="checkbox" name="save_check" value="Y" <%=cookieCheck %>/>
			아이디 저장하기
	<br/>
	패스워드 : <input type="text" name="user_pwd"/>
	<br/>
	<input type="submit" value="Login" />
</form>
</body>
</html>